{% extends 'base.html' %}
{% load static %}

{% block title %}Thống kê MBTI{% endblock %}

{% block content %}
<div class="container py-5">
    <header class="mb-5 text-center">
        <h1 class="display-4 mb-3">Thống kê MBTI</h1>
        <p class="lead text-muted">Phân tích số liệu thống kê về các nhóm tính cách MBTI</p>
    </header>

    <!-- Quick Stats Cards -->
    <section class="mb-5">
        <div class="row g-4">
            <div class="col-md-3">
                <div class="card text-center h-100">
                    <div class="card-body">
                        <h3 class="display-4 text-primary mb-2">82</h3>
                        <p class="text-muted mb-0">Tổng số ngành học</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center h-100">
                    <div class="card-body">
                        <h3 class="display-4 text-success mb-2">16</h3>
                        <p class="text-muted mb-0">Nhóm tính cách</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center h-100">
                    <div class="card-body">
                        <h3 class="display-4 text-info mb-2">7</h3>
                        <p class="text-muted mb-0">Nhóm ngành</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center h-100">
                    <div class="card-body">
                        <h3 class="display-4 text-warning mb-2">22.7</h3>
                        <p class="text-muted mb-0">Điểm chuẩn TB</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Statistics Tabs -->
    <section class="mb-5">
        <ul class="nav nav-tabs mb-3" id="statsTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="overview-tab" data-bs-toggle="tab" data-bs-target="#overview" type="button" role="tab" aria-selected="true">
                    Tổng quan
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="field-tab" data-bs-toggle="tab" data-bs-target="#field" type="button" role="tab" aria-selected="false">
                    Theo nhóm ngành
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="personality-tab" data-bs-toggle="tab" data-bs-target="#personality" type="button" role="tab" aria-selected="false">
                    Theo tính cách
                </button>
            </li>
        </ul>

        <div class="tab-content" id="statsTabContent">
            <!-- Overview Tab -->
            {% include 'components/overview_tab.html' %}

            <!-- Field Statistics Tab -->
            {% include 'components/field_tab.html' with fields=fields %}

            <!-- Personality Statistics Tab -->
            {% include 'components/personality_tab.html' %}
        </div>
    </section>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{% static 'js/charts/charts.js' %}"></script>
{% endblock %}

{% block extra_css %}
<style>
.field-row { cursor: pointer; }
.field-row.active { background-color: rgba(0,0,0,0.05); }
.field-row:hover { background-color: rgba(0,0,0,0.02); }
.field-charts { transition: all 0.3s ease; }
</style>
{% endblock %}